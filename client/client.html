<html>
<head>
	<title>Chat prototype</title>
	<script src="jquery-3.2.1.min.js"></script>
	<script src="js/chat.js"></script>
</head>
<body>
	<h1>
		SjChat
	</h1>
	<p id="hw"> </p>
	<p id="chatExample"> </p>
	<script>
		// Change when back-end works
		var apiAddress = "http://localhost:8080/";
		var dataManager = new DataManager();


		// Add a new chat to the dataManager
		dataManager.putChat(
			{
				"id": 123,
				"title": "exampleChat",
				"participants": [
					{
						"id": 5,
						"username": "Five"
					}
				]
			});

		// Add a message to that chat, written by Five
		dataManager.putMessage(123, 
			{
				"id": 0,
				"message": "Hej! Det är Five som skriver det här!",
				"sender": 5
			});


		$.get(apiAddress, function(data){
			var chats = JSON.parse(data);
			for (let chat of chats){
				dataManager.putChat(chat);
			}

			document.getElementById("chatExample").innerHTML = JSON.stringify(dataManager, null, 2);
		});

		
		/*var xhttp = new XMLHttpRequest();
		xhttp.open("GET", apiAddress+"/chat", false);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send();
		var response = JSON.parse(xhttp.responseText);
		document.getElementById("hw").innerHTML = response;*/


	</script>
</body>
</html>